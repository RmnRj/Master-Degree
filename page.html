<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Guide to AI Master's Programs</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Chosen Palette: Warm Neutral & Muted Blue. Background: bg-slate-50, Primary Text: text-slate-800, Accent/Interactive: bg-sky-600/text-white, Highlights: bg-amber-100/text-amber-800 -->
    <!-- Application Structure Plan: A multi-section single-page application (SPA) with top navigation. The structure includes: 'Welcome', 'University Explorer', 'Scholarship Finder', and 'Application Guide'. This task-oriented design transforms the linear report into an interactive tool. It allows users to immediately filter and compare universities by cost and location, find scholarships relevant to their profile (e.g., practical-focused), and access application advice in digestible segments. This structure is more usable for the target audience who have specific, urgent questions about cost and eligibility, rather than needing to read a full report sequentially. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Top 30 & Low-Cost Universities -> Goal: Compare/Filter -> Viz/Presentation Method: Interactive Cards -> Interaction: Dropdown/Search filters -> Justification: Allows users to quickly narrow down 40+ options to a relevant few, far more efficient than scanning static tables. Library: Vanilla JS.
        - Report Info: University Tuition Costs -> Goal: Compare/Highlight -> Viz/Presentation Method: Horizontal Bar Chart -> Interaction: Static visual -> Justification: Immediately and powerfully communicates the immense cost difference between elite Western universities and tuition-free European options, a key insight of the report. Library: Chart.js.
        - Report Info: Scholarship Programs -> Goal: Organize/Inform -> Viz/Presentation Method: Filterable Accordion List -> Interaction: Filter buttons & click-to-expand details -> Justification: Manages information density by showing summaries first, and allows users to find scholarships that match their specific, non-traditional profile (e.g., practical-focused, low-income). Library: Vanilla JS.
        - Report Info: Application Advice -> Goal: Inform -> Viz/Presentation Method: Accordion Component -> Interaction: Click-to-expand -> Justification: Breaks down long-form text from the report into structured, thematic sections, improving readability and information retention. Library: Vanilla JS. 
        - New Feature: SOP & Essay Idea Generator (LLM) -> Goal: Generate personalized content ideas -> Viz/Presentation Method: Text input/output -> Interaction: Textarea input, button click to generate -> Justification: Directly addresses a common need for applicants (getting started with essays) by providing tailored suggestions based on their input and target university's focus, powered by Gemini API.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 400px;
            max-height: 50vh;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 500px;
            }
        }
        .nav-link {
            transition: all 0.3s ease;
        }
        .nav-link.active {
            color: #0284c7;
            border-bottom-color: #0284c7;
        }
        .section {
            display: none;
        }
        .section.active {
            display: block;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
        }
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #0284c7;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-slate-50 text-slate-800">

    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-40 shadow-sm">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <h1 class="text-xl font-bold text-sky-700">AI Master's Guide</h1>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#welcome" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-slate-600 hover:text-sky-600 border-b-2 border-transparent">Welcome</a>
                        <a href="#explorer" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-slate-600 hover:text-sky-600 border-b-2 border-transparent">University Explorer</a>
                        <a href="#scholarships" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-slate-600 hover:text-sky-600 border-b-2 border-transparent">Scholarship Finder</a>
                        <a href="#guide" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-slate-600 hover:text-sky-600 border-b-2 border-transparent">Application Guide</a>
                    </div>
                </div>
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="inline-flex items-center justify-center p-2 rounded-md text-slate-400 hover:text-sky-600 hover:bg-slate-100 focus:outline-none">
                        <svg class="h-6 w-6" stroke="currentColor" fill="none" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </nav>
        <div id="mobile-menu" class="md:hidden hidden">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#welcome" class="nav-link block px-3 py-2 rounded-md text-base font-medium text-slate-600 hover:text-sky-600 hover:bg-slate-100">Welcome</a>
                <a href="#explorer" class="nav-link block px-3 py-2 rounded-md text-base font-medium text-slate-600 hover:text-sky-600 hover:bg-slate-100">University Explorer</a>
                <a href="#scholarships" class="nav-link block px-3 py-2 rounded-md text-base font-medium text-slate-600 hover:text-sky-600 hover:bg-slate-100">Scholarship Finder</a>
                <a href="#guide" class="nav-link block px-3 py-2 rounded-md text-base font-medium text-slate-600 hover:text-sky-600 hover:bg-slate-100">Application Guide</a>
            </div>
        </div>
    </header>

    <main class="container mx-auto p-4 sm:p-6 lg:p-8">
        
        <section id="welcome" class="section">
            <div class="bg-white p-6 sm:p-8 rounded-xl shadow-md">
                <h2 class="text-2xl md:text-3xl font-bold text-slate-900 mb-4">Navigating Your AI Master's Journey</h2>
                <p class="text-slate-600 mb-6">
                    This interactive guide is designed for aspiring AI professionals with strong practical skills. We'll help you explore top global universities, identify affordable programs (under $800/year), find scholarships that value hands-on experience over perfect grades, and provide actionable advice to craft a winning application.
                </p>
                <div class="prose max-w-none prose-slate">
                    <h3>The AI Opportunity</h3>
                    <p>The landscape of Artificial Intelligence is experiencing exponential growth, fueling an unprecedented demand for skilled professionals. A Master's degree in AI has become a vital credential, serving as a gateway to advanced research and specialized roles like Machine Learning Engineer, Data Scientist, and AI Engineer.</p>
                    <h3>For the Practical-Minded Student</h3>
                    <p>While traditional academic metrics are important, the dynamic nature of AI emphasizes practical application and problem-solving. This guide acknowledges and values the unique strengths of students who possess hands-on project experience and industry exposure, even if their undergraduate marks are not top-tier. We aim to empower you by providing data-driven insights and actionable strategies to leverage your practical strengths and achieve your academic aspirations in AI.</p>
                </div>
            </div>
        </section>

        <section id="explorer" class="section">
             <div class="bg-white p-6 sm:p-8 rounded-xl shadow-md">
                <h2 class="text-2xl md:text-3xl font-bold text-slate-900 mb-2">University Explorer</h2>
                <p class="text-slate-600 mb-6">Filter and search through top-ranked and low-cost universities offering AI-related Master's degrees. Use the controls below to find programs that fit your budget and location preferences.</p>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 p-4 bg-slate-100 rounded-lg">
                    <div>
                        <label for="search-uni" class="block text-sm font-medium text-slate-700">Search by Name</label>
                        <input type="text" id="search-uni" placeholder="e.g., Stanford" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm p-2">
                    </div>
                    <div>
                        <label for="filter-country" class="block text-sm font-medium text-slate-700">Filter by Country</label>
                        <select id="filter-country" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm p-2">
                            <option value="all">All Countries</option>
                        </select>
                    </div>
                    <div>
                        <label for="filter-cost" class="block text-sm font-medium text-slate-700">Filter by Cost</label>
                        <select id="filter-cost" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm p-2">
                            <option value="all">All Costs</option>
                            <option value="low">Ultra-Low-Cost (<$800/year)</option>
                            <option value="medium">Medium Cost ($801 - $20,000/year)</option>
                            <option value="high">High Cost (>$20,000/year)</option>
                        </select>
                    </div>
                </div>

                <div id="university-list" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                </div>

                <div class="mt-12">
                     <h3 class="text-xl font-bold text-slate-800 mb-4 text-center">Visualizing the Tuition Cost Gap</h3>
                     <p class="text-slate-600 mb-6 max-w-3xl mx-auto text-center">This chart starkly illustrates the difference in annual tuition fees between top-ranked universities in countries like the US and UK versus the tuition-free public universities in Germany and Norway. This visual underscores the financial feasibility of pursuing an AI Master's in specific European countries.</p>
                     <div class="chart-container">
                        <canvas id="tuitionChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <section id="scholarships" class="section">
            <div class="bg-white p-6 sm:p-8 rounded-xl shadow-md">
                <h2 class="text-2xl md:text-3xl font-bold text-slate-900 mb-2">Scholarship Finder</h2>
                <p class="text-slate-600 mb-6">Discover scholarships that prioritize practical skills, diverse backgrounds, and financial need over perfect GPAs. Use the filters to find opportunities that match your profile.</p>

                 <div class="flex flex-wrap gap-2 mb-6">
                    <button class="scholarship-filter-btn active bg-sky-600 text-white px-4 py-2 rounded-full text-sm font-medium" data-filter="all">All</button>
                    <button class="scholarship-filter-btn bg-slate-200 text-slate-700 px-4 py-2 rounded-full text-sm font-medium" data-filter="full">Full Funding</button>
                    <button class="scholarship-filter-btn bg-slate-200 text-slate-700 px-4 py-2 rounded-full text-sm font-medium" data-filter="practical">Practical Focus</button>
                    <button class="scholarship-filter-btn bg-slate-200 text-slate-700 px-4 py-2 rounded-full text-sm font-medium" data-filter="diversity">Diversity-Focused</button>
                    <button class="scholarship-filter-btn bg-slate-200 text-slate-700 px-4 py-2 rounded-full text-sm font-medium" data-filter="gov">Government</button>
                </div>
                
                <div id="scholarship-list" class="space-y-4">
                </div>
            </div>
        </section>

        <section id="guide" class="section">
            <div class="bg-white p-6 sm:p-8 rounded-xl shadow-md">
                <h2 class="text-2xl md:text-3xl font-bold text-slate-900 mb-2">Crafting Your Winning Application</h2>
                 <p class="text-slate-600 mb-6">For students with a strong practical background, the application is your chance to shine. A holistic review means your projects, passion, and potential can significantly outweigh a lower GPA. This guide breaks down how to showcase your unique strengths.</p>
                
                <div id="application-guide-accordion" class="space-y-3 mb-8">
                </div>

                <div class="mt-8 pt-8 border-t border-slate-200">
                    <h3 class="text-xl font-bold text-slate-900 mb-4">✨ SOP & Essay Idea Generator ✨</h3>
                    <p class="text-slate-600 mb-4">Stuck on your Statement of Purpose or essay? Let Gemini help! Describe your practical experience, select a target university, and get personalized ideas to kickstart your writing.</p>
                    
                    <div class="mb-4">
                        <label for="practical-experience" class="block text-sm font-medium text-slate-700">Your Practical Experience (e.g., "Built a sentiment analysis model using Python and TensorFlow for a startup," "Developed a real-time object detection system for drone navigation.")</label>
                        <textarea id="practical-experience" rows="4" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm p-2" placeholder="Describe your key projects, internships, or hands-on skills in AI/CS."></textarea>
                    </div>

                    <div class="mb-6">
                        <label for="target-university-sop" class="block text-sm font-medium text-slate-700">Target University/Program (Optional, for more tailored ideas)</label>
                        <select id="target-university-sop" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm p-2">
                            <option value="">Select a University (Optional)</option>
                        </select>
                    </div>

                    <button id="generate-sop-ideas-btn" class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-sky-600 hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500 transition-colors duration-200">
                        Generate Ideas ✨
                        <div id="sop-spinner" class="spinner ml-3 hidden"></div>
                    </button>

                    <div id="sop-ideas-output" class="mt-6 p-4 bg-slate-100 rounded-lg border border-slate-200 hidden">
                        <p class="text-slate-700 font-semibold mb-2">Your Essay/SOP Ideas:</p>
                        <div id="sop-ideas-content" class="prose prose-slate max-w-none text-slate-800"></div>
                    </div>
                    <div id="sop-error-message" class="mt-4 text-red-600 hidden"></div>
                </div>
            </div>
        </section>

    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            
            const universityData = [
                { name: 'Massachusetts Institute of Technology (MIT)', country: 'United States', cost: 'high', tuition: 61990, focus: 'AI, innovative research projects' },
                { name: 'Stanford University', country: 'United States', cost: 'high', tuition: 67000, focus: 'Network security, innovation, robotics, automation' },
                { name: 'Carnegie Mellon University', country: 'United States', cost: 'high', tuition: 53400, focus: 'Robotics, automation, extensive internship opportunities' },
                { name: 'National University of Singapore (NUS)', country: 'Singapore', cost: 'high', tuition: 35000, focus: 'AI, Smart Industries & Digital Transformation' },
                { name: 'University of Oxford', country: 'United Kingdom', cost: 'high', tuition: 45000, focus: 'Advanced Computer Science, Machine Learning' },
                { name: 'Nanyang Technological University, Singapore (NTU)', country: 'Singapore', cost: 'high', tuition: 30000, focus: 'Extensive education in AI, tailored for industry' },
                { name: 'Harvard University', country: 'United States', cost: 'high', tuition: 55000, focus: 'Superior academic resources, scientific environment' },
                { name: 'University of California, Berkeley (UCB)', country: 'United States', cost: 'high', tuition: 54708, focus: 'Data science, machine learning, research opportunities' },
                { name: 'University of Cambridge', country: 'United Kingdom', cost: 'high', tuition: 40000, focus: 'Machine learning, machine intelligence' },
                { name: 'ETH Zurich', country: 'Switzerland', cost: 'medium', tuition: 4800, focus: 'Robotics, Systems, and Control' },
                { name: 'Tsinghua University', country: 'China (Mainland)', cost: 'medium', tuition: 7500, focus: 'Computer Science, Artificial Intelligence' },
                { name: 'University of Toronto', country: 'Canada', cost: 'high', tuition: 55000, focus: 'Applied Computing, AI in Healthcare' },
                { name: 'Princeton University', country: 'United States', cost: 'high', tuition: 57410, focus: 'Computer Science, AI-related engineering' },
                { name: 'Peking University', country: 'China (Mainland)', cost: 'medium', tuition: 7000, focus: 'Computer Science, Artificial Intelligence' },
                { name: 'EPFL', country: 'Switzerland', cost: 'medium', tuition: 4800, focus: 'Robotics, Systems, and Control' },
                { name: 'University of California, Los Angeles (UCLA)', country: 'United States', cost: 'high', tuition: 33238, focus: 'Artificial Intelligence, Machine Learning' },
                { name: 'New York University (NYU)', country: 'United States', cost: 'high', tuition: 58000, focus: 'Computer Science, AI' },
                { name: 'Cornell University', country: 'United States', cost: 'high', tuition: 41000, focus: 'Computer graphics, human-computer interaction' },
                { name: 'University of Washington', country: 'United States', cost: 'high', tuition: 39000, focus: 'Cloud computing, big data analytics, AI & Machine Learning' },
                { name: 'Shanghai Jiao Tong University', country: 'China (Mainland)', cost: 'medium', tuition: 5000, focus: 'Computer Science, AI' },
                { name: 'The University of Hong Kong', country: 'Hong Kong SAR', cost: 'medium', tuition: 21000, focus: 'Computer Science, AI' },
                { name: 'Imperial College London', country: 'United Kingdom', cost: 'high', tuition: 50000, focus: 'Computing (Artificial Intelligence and Machine Learning)' },
                { name: 'The University of Edinburgh', country: 'United Kingdom', cost: 'high', tuition: 47000, focus: 'Artificial Intelligence, NLP, Machine Learning' },
                { name: 'The Hong Kong University of Science and Technology', country: 'Hong Kong SAR', cost: 'medium', tuition: 18000, focus: 'Data-Centric Artificial Intelligence Technology' },
                { name: 'UCL', country: 'United Kingdom', cost: 'high', tuition: 50200, focus: 'Artificial Intelligence and Data Engineering, Machine Learning' },
                { name: 'University of Illinois at Urbana-Champaign', country: 'United States', cost: 'high', tuition: 40000, focus: 'Computer Science, AI' },
                { name: 'Georgia Institute of Technology', country: 'United States', cost: 'high', tuition: 30000, focus: 'Computer networking, software engineering, AI' },
                { name: 'University of British Columbia', country: 'Canada', cost: 'medium', tuition: 9884, focus: 'Data Science, Computer Science' },
                { name: 'University of Waterloo', country: 'Canada', cost: 'high', tuition: 25000, focus: 'Computer Science, AI' },
                { name: 'Technical University of Munich', country: 'Germany', cost: 'medium', tuition: 12000, focus: 'Computer Science, AI (Note: New fees for non-EU)' },
                { name: 'Technical University Ingolstadt', country: 'Germany', cost: 'low', tuition: 350, focus: 'AI Engineering of Autonomous Systems (M.Eng.)' },
                { name: 'Brandenburg University of Technology', country: 'Germany', cost: 'low', tuition: 350, focus: 'Artificial Intelligence (M.Sc.)' },
                { name: 'THWS Wuerzburg Schweinfurt', country: 'Germany', cost: 'low', tuition: 350, focus: 'Artificial Intelligence (M.Sc.)' },
                { name: 'University of Erlangen–Nuremberg', country: 'Germany', cost: 'low', tuition: 350, focus: 'Artificial Intelligence (M.Sc.)' },
                { name: 'University of Oslo', country: 'Norway', cost: 'low', tuition: 0, focus: 'AI-related programs (general)' },
                { name: 'Norwegian University of Science and Technology', country: 'Norway', cost: 'low', tuition: 0, focus: 'AI-related programs (general)' },
                { name: 'University of Bergen', country: 'Norway', cost: 'low', tuition: 0, focus: 'AI-related programs (general)' },
            ];

            const scholarshipData = [
                { name: "Google DeepMind AI Master's Scholarships", provider: 'Google DeepMind', benefits: 'Full tuition, living stipend, travel/relocation, mentorship.', criteria: ['diversity', 'full', 'practical'], eligibility: 'Underrepresented groups, limited financial means; admitted to partner university\'s AI program.', process: 'University nominates admitted students; selection based on academic merit, financial need, and diversity alignment.' },
                { name: 'Spärck AI Scholarships', provider: 'UK Government (DSIT)', benefits: 'Full tuition & living costs; industry placements, mentorship.', criteria: ['gov', 'full', 'diversity'], eligibility: 'Talented UK/international students in AI/STEM; emphasis on low-income backgrounds.', process: 'Applications open Spring 2026 for Oct 2026 cohort; partner universities co-design/co-fund.' },
                { name: 'AWS AI & ML Scholars (Nanodegree)', provider: 'AWS / Udacity', benefits: 'Fully funded Udacity Nanodegree (4 months); hands-on projects.', criteria: ['practical', 'diversity'], eligibility: '18+ years old, basic Python, English proficiency; no prior AI/ML experience needed.', process: 'Apply for Challenge Phase; complete course & pass assessment; top performers invited to Nanodegree.' },
                { name: 'USGIF Scholarship Program', provider: 'USGIF', benefits: '$5,000 - $15,000 award.', criteria: ['practical'], eligibility: 'GPA > 2.5; passion for geospatial intelligence/sciences (incl. AI/ML); encourages first-gen/community college students.', process: 'Online application with essays, CV, LORs; project portfolio recommended.' },
                { name: 'University of Birmingham AI and Data Science Scholarships', provider: 'University of Birmingham', benefits: '£10,000 (approx. $12,700).', criteria: ['diversity'], eligibility: 'Prioritizes women, Black students, disabled students, and those from lower socioeconomic backgrounds.', process: 'Apply to Master\'s program; complete separate scholarship application form.' },
                { name: 'DAAD Scholarships', provider: 'German Academic Exchange Service', benefits: 'Varies, often covers tuition, living expenses, insurance.', criteria: ['gov', 'full'], eligibility: 'Various, depending on program; for international students studying in Germany.', process: 'Check DAAD website for specific program eligibility and application procedures.' },
            ];

            const guideData = [
                { title: 'Showcasing Your Project Portfolio', content: 'A well-curated project portfolio is your strongest asset. Use platforms like GitHub for code and a personal website to tell your story. Focus on projects that solve real-world problems. For each project, explain the AI skills used, decisions made, and what you learned. Include visuals, demos, and links to live applications if possible.' },
                { title: 'Writing a Compelling Statement of Purpose (SOP)', content: 'Your SOP is your narrative. Start with your passion for AI, then dive into your practical experiences. Quantify your impact whenever possible (e.g., "improved efficiency by 15%"). If you need to address a lower GPA, do so briefly and honestly, focusing on what you learned and how you grew. Crucially, tailor your SOP to each program, mentioning specific professors or courses that excite you.' },
                { title: 'Securing Impactful Letters of Recommendation (LORs)', content: 'Choose recommenders who know your practical work well—professors who supervised projects or managers from internships are ideal. Ask them well in advance if they can write a *strong* letter. Provide them with your resume, SOP, and a list of key projects or skills you\'d like them to highlight. A mix of academic and professional letters provides a balanced view.' },
                { title: 'Addressing Academic Weaknesses', content: 'Don\'t hide from a lower GPA; address it constructively. Briefly explain any extenuating circumstances without making excuses. The key is to show growth. Highlight an upward trend in your grades for relevant subjects, strong standardized test scores (if applicable), or certifications you\'ve earned. Emphasize how your extensive practical experience compensates for your academic record and makes you a unique and valuable candidate.' },
            ];
            
            const uniList = document.getElementById('university-list');
            const searchInput = document.getElementById('search-uni');
            const countryFilter = document.getElementById('filter-country');
            const costFilter = document.getElementById('filter-cost');

            const scholarshipList = document.getElementById('scholarship-list');
            const scholarshipFilterBtns = document.querySelectorAll('.scholarship-filter-btn');

            const appGuideAccordion = document.getElementById('application-guide-accordion');

            // SOP Idea Generator elements
            const practicalExperienceInput = document.getElementById('practical-experience');
            const targetUniversitySOPSelect = document.getElementById('target-university-sop');
            const generateSopIdeasBtn = document.getElementById('generate-sop-ideas-btn');
            const sopIdeasOutput = document.getElementById('sop-ideas-output');
            const sopIdeasContent = document.getElementById('sop-ideas-content');
            const sopSpinner = document.getElementById('sop-spinner');
            const sopErrorMessage = document.getElementById('sop-error-message');

            let tuitionChartInstance = null; // Variable to hold the Chart.js instance


            function getCountryFlag(country) {
                const flags = {
                    'United States': '🇺🇸', 'Singapore': '🇸🇬', 'United Kingdom': '🇬🇧', 'Switzerland': '🇨🇭',
                    'China (Mainland)': '🇨🇳', 'Canada': '🇨🇦', 'Hong Kong SAR': '🇭🇰', 'Germany': '🇩🇪', 'Norway': '🇳🇴'
                };
                return flags[country] || '🌍';
            }

            function getCostTag(cost) {
                switch (cost) {
                    case 'low': return '<span class="text-xs font-medium inline-block py-1 px-2.5 leading-none text-center whitespace-nowrap align-baseline rounded-full bg-green-200 text-green-800">Low Cost</span>';
                    case 'medium': return '<span class="text-xs font-medium inline-block py-1 px-2.5 leading-none text-center whitespace-nowrap align-baseline rounded-full bg-amber-200 text-amber-800">Medium Cost</span>';
                    case 'high': return '<span class="text-xs font-medium inline-block py-1 px-2.5 leading-none text-center whitespace-nowrap align-baseline rounded-full bg-red-200 text-red-800">High Cost</span>';
                    default: return '';
                }
            }

            function renderUniversities() {
                const searchTerm = searchInput.value.toLowerCase();
                const selectedCountry = countryFilter.value;
                const selectedCost = costFilter.value;

                const filteredData = universityData.filter(uni => {
                    const matchesSearch = uni.name.toLowerCase().includes(searchTerm);
                    const matchesCountry = selectedCountry === 'all' || uni.country === selectedCountry;
                    const matchesCost = selectedCost === 'all' || uni.cost === selectedCost;
                    return matchesSearch && matchesCountry && matchesCost;
                });
                
                uniList.innerHTML = '';
                if (filteredData.length === 0) {
                    uniList.innerHTML = '<p class="text-slate-500 col-span-full text-center">No universities match your criteria.</p>';
                    return;
                }
                filteredData.forEach(uni => {
                    const card = document.createElement('div');
                    card.className = 'bg-white border border-slate-200 rounded-lg p-5 shadow-sm hover:shadow-lg transition-shadow duration-300 flex flex-col';
                    card.innerHTML = `
                        <div class="flex-grow">
                            <div class="flex justify-between items-start">
                                <h3 class="text-lg font-bold text-slate-800 pr-2">${uni.name}</h3>
                                <span class="text-2xl">${getCountryFlag(uni.country)}</span>
                            </div>
                            <p class="text-sm text-slate-500 mb-3">${uni.country}</p>
                            <p class="text-sm text-slate-600"><strong>Focus:</strong> ${uni.focus}</p>
                        </div>
                        <div class="mt-4 pt-4 border-t border-slate-100 flex justify-between items-center">
                            ${getCostTag(uni.cost)}
                            <span class="text-sm font-semibold text-slate-700">$${uni.tuition.toLocaleString()}/year</span>
                        </div>
                    `;
                    uniList.appendChild(card);
                });
            }

            function populateFilters() {
                const countries = [...new Set(universityData.map(uni => uni.country))].sort();
                countries.forEach(country => {
                    const option = document.createElement('option');
                    option.value = country;
                    option.textContent = country;
                    countryFilter.appendChild(option);
                });

                universityData.forEach(uni => {
                    const option = document.createElement('option');
                    option.value = uni.name;
                    option.textContent = uni.name;
                    targetUniversitySOPSelect.appendChild(option);
                });
            }

            function renderScholarships() {
                const activeFilter = document.querySelector('.scholarship-filter-btn.active').dataset.filter;

                const filteredData = activeFilter === 'all'
                    ? scholarshipData
                    : scholarshipData.filter(s => s.criteria.includes(activeFilter));

                scholarshipList.innerHTML = '';
                if (filteredData.length === 0) {
                    scholarshipList.innerHTML = '<p class="text-slate-500 text-center">No scholarships match your criteria.</p>';
                    return;
                }
                filteredData.forEach((s, index) => {
                    const item = document.createElement('div');
                    item.className = 'border border-slate-200 rounded-lg';
                    item.innerHTML = `
                        <button class="accordion-header w-full flex justify-between items-center text-left p-4 bg-slate-50 hover:bg-slate-100 rounded-t-lg">
                            <span class="font-semibold text-sky-800">${s.name}</span>
                            <svg class="w-6 h-6 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="accordion-content">
                            <div class="p-4 border-t border-slate-200">
                                <p class="mb-2"><strong>Provider:</strong> ${s.provider}</p>
                                <p class="mb-2"><strong>Benefits:</strong> ${s.benefits}</p>
                                <p class="mb-2"><strong>Key Eligibility:</strong> ${s.eligibility}</p>
                                <p><strong>Application Process:</strong> ${s.process}</p>
                            </div>
                        </div>
                    `;
                    scholarshipList.appendChild(item);
                });
            }

            function renderApplicationGuide() {
                guideData.forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'border border-slate-200 rounded-lg';
                    div.innerHTML = `
                        <button class="accordion-header w-full flex justify-between items-center text-left p-4 bg-slate-50 hover:bg-slate-100 rounded-lg">
                            <span class="text-md font-semibold text-slate-700">${item.title}</span>
                             <svg class="w-6 h-6 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="accordion-content">
                            <div class="p-4 border-t border-slate-200 prose prose-slate max-w-none">
                                <p>${item.content}</p>
                            </div>
                        </div>
                    `;
                    appGuideAccordion.appendChild(div);
                });
            }
            
            function setupAccordionListeners(containerId) {
                const container = document.getElementById(containerId);
                container.addEventListener('click', function(e) {
                    const header = e.target.closest('.accordion-header');
                    if(header) {
                        const content = header.nextElementSibling;
                        const icon = header.querySelector('svg');
                        
                        // Close all other open accordions except the clicked one
                        document.querySelectorAll('.accordion-content').forEach(otherContent => {
                            if (otherContent !== content && otherContent.style.maxHeight) {
                                otherContent.style.maxHeight = null;
                                otherContent.previousElementSibling.querySelector('svg').classList.remove('rotate-180');
                            }
                        });

                        if (content.style.maxHeight) {
                            content.style.maxHeight = null;
                            icon.classList.remove('rotate-180');
                        } else {
                            content.style.maxHeight = content.scrollHeight + "px";
                            icon.classList.add('rotate-180');
                        }
                    }
                });
            }

            function renderTuitionChart() {
                const ctx = document.getElementById('tuitionChart').getContext('2d');

                // Destroy existing chart instance if it exists
                if (tuitionChartInstance) {
                    tuitionChartInstance.destroy();
                }

                const chartData = [
                    { uni: 'Stanford (US)', tuition: 67000, color: 'rgba(239, 68, 68, 0.6)' },
                    { uni: 'Cambridge (UK)', tuition: 40000, color: 'rgba(239, 68, 68, 0.6)' },
                    { uni: 'U of Toronto (Canada)', tuition: 55000, color: 'rgba(239, 68, 68, 0.6)' },
                    { uni: 'ETH Zurich (CH)', tuition: 4800, color: 'rgba(245, 158, 11, 0.6)' },
                    { uni: 'TUM (Germany - New Fee)', tuition: 12000, color: 'rgba(245, 158, 11, 0.6)' },
                    { uni: 'U of Oslo (Norway)', tuition: 0, color: 'rgba(34, 197, 94, 0.6)' },
                    { uni: 'THWS (Germany)', tuition: 350, color: 'rgba(34, 197, 94, 0.6)' },
                ].sort((a,b) => b.tuition - a.tuition);

                tuitionChartInstance = new Chart(ctx, { // Assign new Chart instance to the variable
                    type: 'bar',
                    data: {
                        labels: chartData.map(d => d.uni),
                        datasets: [{
                            label: 'Annual Tuition (USD)',
                            data: chartData.map(d => d.tuition),
                            backgroundColor: chartData.map(d => d.color),
                            borderColor: chartData.map(d => d.color.replace('0.6', '1')),
                            borderWidth: 1
                        }]
                    },
                    options: {
                        indexAxis: 'y',
                        maintainAspectRatio: false,
                        responsive: true,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.dataset.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed.x !== null) {
                                            label += new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(context.parsed.x);
                                        }
                                        return label;
                                    }
                                }
                            }
                        },
                        scales: {
                            x: {
                                title: {
                                    display: true,
                                    text: 'Approximate Annual Tuition (USD)'
                                },
                                ticks: {
                                    callback: function(value, index, values) {
                                        return '$' + value / 1000 + 'k';
                                    }
                                }
                            }
                        }
                    }
                });
            }

            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('.section');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');

            function switchTab(hash) {
                navLinks.forEach(link => {
                    link.classList.toggle('active', link.hash === hash);
                });
                sections.forEach(section => {
                    section.classList.toggle('active', '#' + section.id === hash);
                });

                // Render tuition chart only if the explorer tab is active
                if (hash === '#explorer') {
                     renderTuitionChart();
                }
            }
            
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    switchTab(link.hash);
                    window.location.hash = link.hash;
                    if(mobileMenu.classList.contains('block')) {
                       mobileMenu.classList.add('hidden');
                    }
                });
            });

            searchInput.addEventListener('input', renderUniversities);
            countryFilter.addEventListener('change', renderUniversities);
            costFilter.addEventListener('change', renderUniversities);

            scholarshipFilterBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    scholarshipFilterBtns.forEach(b => b.classList.remove('active', 'bg-sky-600', 'text-white'));
                    scholarshipFilterBtns.forEach(b => b.classList.add('bg-slate-200', 'text-slate-700'));
                    btn.classList.add('active', 'bg-sky-600', 'text-white');
                    btn.classList.remove('bg-slate-200', 'text-slate-700');
                    renderScholarships();
                });
            });

            // Gemini API Integration for SOP Idea Generator
            generateSopIdeasBtn.addEventListener('click', async () => {
                const practicalExperience = practicalExperienceInput.value.trim();
                const selectedUniName = targetUniversitySOPSelect.value;
                
                sopIdeasContent.innerHTML = '';
                sopIdeasOutput.classList.add('hidden');
                sopErrorMessage.classList.add('hidden');
                sopSpinner.classList.remove('hidden');

                if (!practicalExperience) {
                    sopErrorMessage.textContent = "Please describe your practical experience to generate ideas.";
                    sopErrorMessage.classList.remove('hidden');
                    sopSpinner.classList.add('hidden');
                    return;
                }

                let prompt = `As an expert in AI Master's admissions, generate 3-5 concise, compelling Statement of Purpose (SOP) or essay ideas for a student applying to an AI Master's program. The student has a strong practical background, even if their academic marks (GPA around 6-7 out of 10) are not top-tier. Focus on how their practical experience compensates for grades and makes them a unique candidate.

Student's practical experience: "${practicalExperience}"`;

                if (selectedUniName) {
                    const targetUni = universityData.find(uni => uni.name === selectedUniName);
                    if (targetUni) {
                        prompt += `\nTarget University/Program: ${targetUni.name}, which focuses on ${targetUni.focus}.`;
                        prompt += ` Emphasize how the student's practical skills align with this university's specific focus areas.`;
                    }
                }

                prompt += `\n\nFormat the ideas as a bulleted list, starting each idea with a strong, active verb.`;

                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });

                const payload = { contents: chatHistory };
                const apiKey = ""; // Canvas will provide this API key in runtime
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(`API error: ${response.status} ${response.statusText} - ${errorData.error.message}`);
                    }

                    const result = await response.json();
                    
                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const text = result.candidates[0].content.parts[0].text;
                        sopIdeasContent.innerHTML = text.replace(/\n/g, '<br>'); // Displaying as HTML, using <br> for new lines
                        sopIdeasOutput.classList.remove('hidden');
                    } else {
                        sopErrorMessage.textContent = "Could not generate ideas. Please try again with different input.";
                        sopErrorMessage.classList.remove('hidden');
                    }
                } catch (error) {
                    console.error("Error generating SOP ideas:", error);
                    sopErrorMessage.textContent = `An error occurred: ${error.message}. Please try again later.`;
                    sopErrorMessage.classList.remove('hidden');
                } finally {
                    sopSpinner.classList.add('hidden');
                }
            });


            const initialHash = window.location.hash || '#welcome';
            switchTab(initialHash);
            
            populateFilters();
            renderUniversities();
            renderScholarships();
            renderApplicationGuide();
            setupAccordionListeners('scholarship-list');
            setupAccordionListeners('application-guide-accordion');
        });
    </script>
</body>
</html>
